<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker - Recovery System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .main-content {
            padding: 30px;
        }

        .button-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .button-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
        }

        .section-title {
            font-size: 1.4em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .negative-section .section-title {
            color: #e74c3c;
        }

        .positive-section .section-title {
            color: #27ae60;
        }

        .action-btn {
            width: 100%;
            padding: 15px;
            margin: 8px 0;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .negative-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .positive-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        .chart-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
        }

        .streak-display {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .streak-number {
            font-size: 3em;
            font-weight: bold;
            display: block;
        }

        .recent-activities {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .activity-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .activity-positive {
            border-left-color: #27ae60;
        }

        .activity-negative {
            border-left-color: #e74c3c;
        }

        .motivational-quote {
            text-align: center;
            font-style: italic;
            font-size: 1.2em;
            color: #7f8c8d;
            padding: 30px;
            background: #ecf0f1;
            border-radius: 15px;
            margin: 20px 0;
        }

        .export-section {
            text-align: center;
            padding: 20px;
        }

        .export-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px;
        }

        .google-sheets-info {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #27ae60;
        }

        @media (max-width: 768px) {
            .button-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .score-display {
                font-size: 2.5em;
            }
        }

        .milestone-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }

        .milestone-alert h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .close-milestone {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Recovery Tracker</h1>
            <div class="score-display" id="totalScore">0</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="currentStreak">0</span>
                    <span>Current Streak</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="bestStreak">0</span>
                    <span>Best Streak</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="totalActions">0</span>
                    <span>Total Actions</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="successRate">100%</span>
                    <span>Success Rate</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="button-grid">
                <div class="button-section negative-section">
                    <div class="section-title">‚ö†Ô∏è Challenges (Tap if occurred)</div>
                    <button class="action-btn negative-btn" onclick="logAction('trigger_content', -2)">
                        üì± Saw triggering content (-2)
                    </button>
                    <button class="action-btn negative-btn" onclick="logAction('peeking', -3)">
                        üëÄ Peeked/stared (-3)
                    </button>
                    <button class="action-btn negative-btn" onclick="logAction('fantasizing', -5)">
                        üí≠ Started fantasizing/edging (-5)
                    </button>
                    <button class="action-btn negative-btn" onclick="logAction('watched_porn', -15)">
                        üî• Watched porn (-15)
                    </button>
                    <button class="action-btn negative-btn" onclick="logAction('relapse', -20)">
                        üíî Masturbated - Full relapse (-20)
                    </button>
                </div>

                <div class="button-section positive-section">
                    <div class="section-title">‚úÖ Victories (Celebrate each win!)</div>
                    <button class="action-btn positive-btn" onclick="logAction('controlled_urge', 2)">
                        üí™ Controlled an urge (+2)
                    </button>
                    <button class="action-btn positive-btn" onclick="logAction('daily_habit', 3)">
                        üèÉ‚Äç‚ôÇÔ∏è Exercise/meditation (+3)
                    </button>
                    <button class="action-btn positive-btn" onclick="logAction('environment', 5)">
                        üõ°Ô∏è Improved environment (+5)
                    </button>
                    <button class="action-btn positive-btn" onclick="logAction('learning', 3)">
                        üìö Read/studied instead (+3)
                    </button>
                    <button class="action-btn positive-btn" onclick="logAction('reflection', 2)">
                        üìù Journaling/reflection (+2)
                    </button>
                    <button class="action-btn positive-btn" onclick="logAction('helping_others', 4)">
                        ü§ù Helped someone else (+4)
                    </button>
                </div>
            </div>

            <div class="streak-display">
                <span class="streak-number" id="streakDisplay">0</span>
                <span>Days Clean</span>
                <div id="streakMessage">Every day is a victory! üèÜ</div>
            </div>

            <div class="chart-container">
                <h3 style="text-align: center; margin-bottom: 20px;">üìà Progress Over Time</h3>
                <div class="chart-wrapper">
                    <canvas id="progressChart"></canvas>
                </div>
            </div>

            <div class="recent-activities">
                <h3 style="margin-bottom: 15px;">üìã Recent Activities</h3>
                <div id="activityLog"></div>
            </div>

            <div class="google-sheets-info">
                <h3>üîó Google Sheets Integration Setup</h3>
                <p><strong>Updated Method (2024/2025):</strong></p>
                <p><strong>Step 1:</strong> Go to <a href="https://script.google.com" target="_blank">script.google.com</a> directly</p>
                <p><strong>Step 2:</strong> Click "New Project" and paste the script below</p>
                <p><strong>Step 3:</strong> Create a Google Sheet with columns: Date, Time, Action, Score, Running Total</p>
                <p><strong>Step 4:</strong> In the script, replace 'YOUR_SHEET_ID' with your actual Google Sheet ID</p>
                <p><strong>Step 5:</strong> Deploy as Web App and copy the URL</p>
                <p><strong>Step 6:</strong> Connect this data to Notion using Zapier or Make.com</p>
                <button class="export-btn" onclick="exportToCSV()">üìä Export Data to CSV</button>
                <button class="export-btn" onclick="copyGoogleAppsScript()">üìù Copy Google Apps Script</button>
                <button class="export-btn" onclick="showGoogleSheetsInstructions()">üìã Detailed Setup Guide</button>
            </div>

            <div class="motivational-quote" id="motivationalQuote">
                "Success is the sum of small efforts repeated day in and day out." - Robert Collier
            </div>

            <div class="export-section">
                <button class="export-btn" onclick="resetData()">üîÑ Reset All Data</button>
                <button class="export-btn" onclick="showStats()">üìä Detailed Statistics</button>
            </div>
        </div>
    </div>

    <div class="milestone-alert" id="milestoneAlert">
        <h2 id="milestoneTitle">üéâ Milestone Achieved!</h2>
        <p id="milestoneMessage">Great work on your progress!</p>
        <button class="close-milestone" onclick="closeMilestone()">Continue</button>
    </div>

    <script>
        // Data storage and management
        let habitData = {
            totalScore: 0,
            currentStreak: 0,
            bestStreak: 0,
            lastActionDate: null,
            activities: [],
            dailyScores: [],
            streakHistory: [],
            milestones: []
        };

        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('habitTrackerData');
            if (saved) {
                habitData = JSON.parse(saved);
                updateDisplay();
                updateChart();
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('habitTrackerData', JSON.stringify(habitData));
        }

        // Motivational quotes
        const quotes = [
            "Success is the sum of small efforts repeated day in and day out. - Robert Collier",
            "The only impossible journey is the one you never begin. - Tony Robbins",
            "Your limitation‚Äîit's only your imagination.",
            "Great things never come from comfort zones.",
            "Don't stop when you're tired. Stop when you're done.",
            "Wake up with determination. Go to bed with satisfaction.",
            "Do something today that your future self will thank you for.",
            "Little progress each day adds up to big results.",
            "Don't wish it were easier; wish you were better. - Jim Rohn",
            "The comeback is always stronger than the setback."
        ];

        // Log an action
        function logAction(actionType, scoreChange) {
            const now = new Date();
            const today = now.toDateString();
            
            // Add to activities
            habitData.activities.unshift({
                type: actionType,
                score: scoreChange,
                timestamp: now.toISOString(),
                date: today
            });

            // Update total score
            habitData.totalScore += scoreChange;

            // Handle streak logic
            if (scoreChange < 0 && (actionType === 'relapse' || actionType === 'watched_porn')) {
                // Reset streak for major relapses
                if (habitData.currentStreak > habitData.bestStreak) {
                    habitData.bestStreak = habitData.currentStreak;
                }
                habitData.currentStreak = 0;
            } else if (scoreChange > 0) {
                // Increase streak for positive actions
                if (!habitData.lastActionDate || habitData.lastActionDate !== today) {
                    habitData.currentStreak++;
                }
            }

            habitData.lastActionDate = today;

            // Update daily scores
            let todayScore = habitData.dailyScores.find(d => d.date === today);
            if (!todayScore) {
                todayScore = { date: today, score: 0 };
                habitData.dailyScores.push(todayScore);
            }
            todayScore.score += scoreChange;

            // Keep only last 30 days of daily scores
            if (habitData.dailyScores.length > 30) {
                habitData.dailyScores = habitData.dailyScores.slice(-30);
            }

            // Keep only last 50 activities
            if (habitData.activities.length > 50) {
                habitData.activities = habitData.activities.slice(0, 50);
            }

            // Check for milestones
            checkMilestones();

            // Update display and save
            updateDisplay();
            updateChart();
            saveData();

            // Add visual feedback
            const button = event.target;
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        }

        // Check for milestones
        function checkMilestones() {
            const milestones = [
                { streak: 1, message: "First day clean! You've taken the first step! üåü" },
                { streak: 3, message: "3 days strong! You're building momentum! üî•" },
                { streak: 7, message: "One week clean! You're proving your strength! üí™" },
                { streak: 14, message: "Two weeks! You're developing real discipline! üèÜ" },
                { streak: 30, message: "30 days! This is a major milestone! üéâ" },
                { streak: 60, message: "60 days! You're becoming unstoppable! üöÄ" },
                { streak: 90, message: "90 days! You've broken the cycle! üëë" },
                { streak: 180, message: "6 months clean! You're a new person! ‚≠ê" },
                { streak: 365, message: "ONE YEAR! You've conquered this challenge! üèÖ" }
            ];

            const currentMilestone = milestones.find(m => 
                m.streak === habitData.currentStreak && 
                !habitData.milestones.includes(m.streak)
            );

            if (currentMilestone) {
                habitData.milestones.push(currentMilestone.streak);
                showMilestone(currentMilestone.streak, currentMilestone.message);
            }
        }

        // Show milestone alert
        function showMilestone(streak, message) {
            document.getElementById('milestoneTitle').textContent = `üéâ ${streak} Days Milestone!`;
            document.getElementById('milestoneMessage').textContent = message;
            document.getElementById('milestoneAlert').style.display = 'block';
        }

        // Close milestone alert
        function closeMilestone() {
            document.getElementById('milestoneAlert').style.display = 'none';
        }

        // Update display
        function updateDisplay() {
            document.getElementById('totalScore').textContent = habitData.totalScore;
            document.getElementById('currentStreak').textContent = habitData.currentStreak;
            document.getElementById('bestStreak').textContent = habitData.bestStreak;
            document.getElementById('totalActions').textContent = habitData.activities.length;
            document.getElementById('streakDisplay').textContent = habitData.currentStreak;

            // Calculate success rate
            const positiveActions = habitData.activities.filter(a => a.score > 0).length;
            const successRate = habitData.activities.length > 0 ? 
                Math.round((positiveActions / habitData.activities.length) * 100) : 100;
            document.getElementById('successRate').textContent = successRate + '%';

            // Update streak message
            const streakMessages = {
                0: "Ready for a fresh start! üå±",
                1: "First step taken! üåü",
                3: "Building momentum! üî•",
                7: "One week strong! üí™",
                14: "Two weeks of discipline! üèÜ",
                30: "One month milestone! üéâ",
                60: "Two months of growth! üöÄ",
                90: "Quarter year achieved! üëë"
            };

            const message = streakMessages[habitData.currentStreak] || 
                (habitData.currentStreak > 90 ? "You're unstoppable! ‚≠ê" : "Keep going strong! üí™");
            document.getElementById('streakMessage').textContent = message;

            // Update recent activities
            updateActivityLog();

            // Update motivational quote
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('motivationalQuote').textContent = randomQuote;
        }

        // Update activity log
        function updateActivityLog() {
            const activityLog = document.getElementById('activityLog');
            activityLog.innerHTML = '';

            habitData.activities.slice(0, 10).forEach(activity => {
                const item = document.createElement('div');
                item.className = `activity-item ${activity.score > 0 ? 'activity-positive' : 'activity-negative'}`;
                
                const actionNames = {
                    'trigger_content': 'Saw triggering content',
                    'peeking': 'Peeked/stared',
                    'fantasizing': 'Started fantasizing',
                    'watched_porn': 'Watched porn',
                    'relapse': 'Masturbated (relapse)',
                    'controlled_urge': 'Controlled an urge',
                    'daily_habit': 'Daily exercise/meditation',
                    'environment': 'Improved environment',
                    'learning': 'Read/studied instead',
                    'reflection': 'Journaling/reflection',
                    'helping_others': 'Helped someone else'
                };

                const time = new Date(activity.timestamp).toLocaleTimeString();
                const date = new Date(activity.timestamp).toLocaleDateString();
                
                item.innerHTML = `
                    <span>${actionNames[activity.type] || activity.type}</span>
                    <span>${activity.score > 0 ? '+' : ''}${activity.score} (${date} ${time})</span>
                `;
                
                activityLog.appendChild(item);
            });
        }

        // Chart functionality
        let chart = null;

        function updateChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }

            // Prepare data for last 30 days
            const last30Days = [];
            const today = new Date();
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateStr = date.toDateString();
                
                const dayData = habitData.dailyScores.find(d => d.date === dateStr);
                last30Days.push({
                    date: date.toLocaleDateString(),
                    score: dayData ? dayData.score : 0
                });
            }

            // Calculate cumulative scores
            let cumulative = 0;
            const cumulativeScores = last30Days.map(day => {
                cumulative += day.score;
                return cumulative;
            });

            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: last30Days.map(d => d.date),
                    datasets: [{
                        label: 'Cumulative Score',
                        data: cumulativeScores,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Daily Score',
                        data: last30Days.map(d => d.score),
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
        }

        // Export functions
        function exportToCSV() {
            const csvContent = "data:text/csv;charset=utf-8," + 
                "Date,Time,Action,Score,Running Total\n" +
                habitData.activities.map(activity => {
                    const date = new Date(activity.timestamp);
                    return `${date.toLocaleDateString()},${date.toLocaleTimeString()},${activity.type},${activity.score},${habitData.totalScore}`;
                }).join('\n');

            const link = document.createElement('a');
            link.setAttribute('href', encodeURI(csvContent));
            link.setAttribute('download', 'habit_tracker_data.csv');
            link.click();
        }

        function copyGoogleAppsScript() {
            const script = `
// Google Apps Script for Habit Tracker
// Replace 'YOUR_SHEET_ID' with your actual Google Sheet ID

function doPost(e) {
    try {
        const sheetId = 'YOUR_SHEET_ID'; // Replace with your Google Sheet ID
        const ss = SpreadsheetApp.openById(sheetId);
        let sheet = ss.getSheetByName('HabitData');
        
        // Create sheet if it doesn't exist
        if (!sheet) {
            sheet = ss.insertSheet('HabitData');
            sheet.getRange(1, 1, 1, 5).setValues([['Date', 'Time', 'Action', 'Score', 'Running Total']]);
        }
        
        const data = JSON.parse(e.postData.contents);
        
        const timestamp = new Date(data.timestamp);
        sheet.appendRow([
            timestamp.toDateString(),
            timestamp.toLocaleTimeString(),
            data.action,
            data.score,
            data.runningTotal
        ]);
        
        return ContentService.createTextOutput(JSON.stringify({status: 'success'}))
            .setMimeType(ContentService.MimeType.JSON);
            
    } catch (error) {
        return ContentService.createTextOutput(JSON.stringify({status: 'error', message: error.toString()}))
            .setMimeType(ContentService.MimeType.JSON);
    }
}

function doGet() {
    return ContentService.createTextOutput('Habit Tracker Script is running!')
        .setMimeType(ContentService.MimeType.TEXT);
}
            `;
            
            navigator.clipboard.writeText(script).then(() => {
                alert('‚úÖ Google Apps Script copied to clipboard!\\n\\nNext steps:\\n1. Go to script.google.com\\n2. Create new project\\n3. Paste this code\\n4. Replace YOUR_SHEET_ID with your actual Sheet ID\\n5. Deploy as Web App');
            }).catch(() => {
                // Fallback for browsers that don't support clipboard
                const textArea = document.createElement('textarea');
                textArea.value = script;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('‚úÖ Google Apps Script copied! (Fallback method)');
            });
        }

        function showGoogleSheetsInstructions() {
            const instructions = `
üìã COMPLETE GOOGLE SHEETS SETUP GUIDE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üîó PART 1: Create Google Sheet
1. Go to sheets.google.com
2. Create new sheet called "Habit Tracker"
3. In row 1, add headers: Date | Time | Action | Score | Running Total
4. Copy the Sheet ID from URL (between /d/ and /edit)
   Example: docs.google.com/spreadsheets/d/SHEET_ID_HERE/edit

‚öôÔ∏è PART 2: Setup Google Apps Script
1. Go to script.google.com (NOT through Sheets menu)
2. Click "New Project"
3. Delete default code and paste the copied script
4. Replace 'YOUR_SHEET_ID' with your actual Sheet ID
5. Click "Deploy" > "New Deployment"
6. Choose "Web app" as type
7. Set execute as "Me" and access to "Anyone"
8. Click "Deploy" and copy the Web App URL

üîó PART 3: Connect to Notion (Optional)
Method 1 - Using Zapier:
‚Ä¢ Create Zapier account
‚Ä¢ New Zap: Google Sheets ‚Üí Notion
‚Ä¢ Trigger: New row in Google Sheets
‚Ä¢ Action: Create page in Notion database

Method 2 - Using Make.com:
‚Ä¢ Create Make.com account
‚Ä¢ New scenario: Google Sheets ‚Üí Notion
‚Ä¢ More powerful than Zapier, free tier available

üìä PART 4: Test Integration
‚Ä¢ Export your current data as CSV
‚Ä¢ Import CSV to your Google Sheet to test
‚Ä¢ Use the Web App URL in future versions for auto-sync

üí° ALTERNATIVE: Simple Method
‚Ä¢ Just use the Export CSV button weekly
‚Ä¢ Import CSV to Google Sheets manually
‚Ä¢ Create charts and analysis in Sheets
‚Ä¢ Share with Notion via copy-paste or embed

Need help? DM me the specific error messages! üöÄ
            `;
            
            alert(instructions);
        }

        function resetData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                habitData = {
                    totalScore: 0,
                    currentStreak: 0,
                    bestStreak: 0,
                    lastActionDate: null,
                    activities: [],
                    dailyScores: [],
                    streakHistory: [],
                    milestones: []
                };
                localStorage.removeItem('habitTrackerData');
                saveData();
                updateDisplay();
                updateChart();
                alert('Data has been reset successfully!');
            }
        }

        function showStats() {
            const stats = `
Detailed Statistics:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä Total Score: ${habitData.totalScore}
üî• Current Streak: ${habitData.currentStreak} days
üèÜ Best Streak: ${habitData.bestStreak} days
üìù Total Actions: ${habitData.activities.length}
üéØ Milestones Achieved: ${habitData.milestones.length}

Recent Performance:
${habitData.activities.slice(0, 5).map(a => `‚Ä¢ ${a.type}: ${a.score > 0 ? '+' : ''}${a.score}`).join('\n')}

Keep pushing forward! üí™
            `;
            alert(stats);
        }

        // Initialize app
        loadData();
        updateDisplay();
        updateChart();
    </script>
</body>
</html>
